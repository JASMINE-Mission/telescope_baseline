<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="2" failures="2" skipped="0" tests="60" time="32.868" timestamp="2022-09-18T11:59:44.607643" hostname="fv-az243-110"><testcase classname="tests.dataclass.efficiency_test" name="test_from_json" time="0.002" /><testcase classname="tests.dataclass.efficiency_test" name="test_evaluate" time="0.001" /><testcase classname="tests.dataclass.efficiency_test" name="test_weighted_mean" time="0.001" /><testcase classname="tests.mapping.test_aperture" name="test_cos_angle_from_normal_vectorAB" time="0.001" /><testcase classname="tests.mapping.test_aperture" name="test_vec2ring" time="0.001" /><testcase classname="tests.mapping.test_aperture" name="test_inout_convex_on_sphere" time="0.001" /><testcase classname="tests.mapping.test_aperture" name="test_inout_convex_on_sphere_map" time="0.001" /><testcase classname="tests.mapping.test_aperture" name="test_inout_detector" time="0.333" /><testcase classname="tests.mapping.test_read_catalog" name="test_inout_detector" time="0.231" /><testcase classname="tests.mission.test_mission" name="test_singleton" time="0.002" /><testcase classname="tests.mission.test_mission" name="test_singleton_2" time="0.001" /><testcase classname="tests.mission.test_mission" name="test_efficiency" time="0.001" /><testcase classname="tests.mission.test_mission" name="test_troughput" time="0.001" /><testcase classname="tests.mission.test_mission" name="test_period" time="0.001" /><testcase classname="tests.mission.test_mission" name="test_inclination" time="0.001" /><testcase classname="tests.photometry.Hw_coeff_test" name="test_compute_Hw_relation" time="4.571" /><testcase classname="tests.photometry.convmag_test" name="test_get_flux" time="0.007" /><testcase classname="tests.photometry.convmag_test" name="test_get_mag" time="0.003" /><testcase classname="tests.pipeline.test_astrometric_catalogue" name="test_save1" time="0.111" /><testcase classname="tests.pipeline.test_astrometric_catalogue" name="test_save2" time="0.099" /><testcase classname="tests.pipeline.test_astrometric_catalogue" name="test_load1" time="0.009" /><testcase classname="tests.pipeline.test_astrometric_catalogue" name="test_load2" time="0.008" /><testcase classname="tests.pipeline.test_astrometric_catalogue_builder" name="test_from_on_the_sky_position1" time="12.738" /><testcase classname="tests.pipeline.test_detector_image" name="test_load" time="0.003" /><testcase classname="tests.pipeline.test_detector_image" name="test_time" time="0.003" /><testcase classname="tests.pipeline.test_detector_image_builder" name="test_from_stellar_image1" time="0.002"><error message="failed on setup with &quot;AttributeError: 'PositionOnDetector' object has no attribute 'n_photons'&quot;">@pytest.fixture
    def detector_image():
        o = PositionOnDetector(1, Position2D(64., 64.), Time('2000-01-01 00:00:00'), 3000)
        s = MapOnDetector([o])
        dib = DetectorImageBuilder(128, 128, 1.0)
&gt;       return dib.from_map_on_detector(s)

../tests/pipeline/test_detector_image_builder.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
telescope_baseline/tools/pipeline/detector_image_builder.py:41: in from_map_on_detector
    self._generate_a_stellar_image(data_array, dps)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &lt;telescope_baseline.tools.pipeline.detector_image_builder.DetectorImageBuilder object at 0x7ff123ca2d30&gt;
a = array([[4.69121344, 9.14683403, 2.15415818, ..., 9.01905985, 6.73194877,
        8.59298833],
       [9.41079025, 8.94...63,
        5.41596987],
       [7.16596779, 7.79653871, 6.44152493, ..., 7.38712438, 0.10493116,
        1.69717474]])
dps = &lt;telescope_baseline.tools.pipeline.position_on_detector.PositionOnDetector object at 0x7ff123ca2dc0&gt;

    def _generate_a_stellar_image(self, a, dps):
&gt;       n = dps.n_photons + np.random.randn() * math.sqrt(dps.n_photons)
E       AttributeError: 'PositionOnDetector' object has no attribute 'n_photons'

telescope_baseline/tools/pipeline/detector_image_builder.py:53: AttributeError</error></testcase><testcase classname="tests.pipeline.test_detector_image_builder" name="test_from_stellar_image2" time="0.001"><error message="failed on setup with &quot;AttributeError: 'PositionOnDetector' object has no attribute 'n_photons'&quot;">@pytest.fixture
    def detector_image():
        o = PositionOnDetector(1, Position2D(64., 64.), Time('2000-01-01 00:00:00'), 3000)
        s = MapOnDetector([o])
        dib = DetectorImageBuilder(128, 128, 1.0)
&gt;       return dib.from_map_on_detector(s)

../tests/pipeline/test_detector_image_builder.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
telescope_baseline/tools/pipeline/detector_image_builder.py:41: in from_map_on_detector
    self._generate_a_stellar_image(data_array, dps)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &lt;telescope_baseline.tools.pipeline.detector_image_builder.DetectorImageBuilder object at 0x7ff123c84f70&gt;
a = array([[5.27013463, 2.34508725, 5.37667922, ..., 5.49534991, 0.24686346,
        7.59713175],
       [8.18272737, 1.37...61,
        5.02520959],
       [1.40651089, 2.63583111, 3.44537266, ..., 1.65772213, 8.52802298,
        5.4921186 ]])
dps = &lt;telescope_baseline.tools.pipeline.position_on_detector.PositionOnDetector object at 0x7ff123ca4df0&gt;

    def _generate_a_stellar_image(self, a, dps):
&gt;       n = dps.n_photons + np.random.randn() * math.sqrt(dps.n_photons)
E       AttributeError: 'PositionOnDetector' object has no attribute 'n_photons'

telescope_baseline/tools/pipeline/detector_image_builder.py:53: AttributeError</error></testcase><testcase classname="tests.pipeline.test_detector_image_builder" name="test_generate_stellar_image" time="0.001"><failure message="AttributeError: 'PositionOnDetector' object has no attribute 'n_photons'">monkeypatch = &lt;_pytest.monkeypatch.MonkeyPatch object at 0x7ff123e11250&gt;

    def test_generate_stellar_image(monkeypatch):
        monkeypatch.setattr(np.random, 'randn', lambda: 0)
        dib = DetectorImageBuilder(128, 128, 1.0)
        a = np.zeros((128, 128))
        si = PositionOnDetector(1, Position2D(50.0, 50.0), Time('2000-01-01 00:00:00'), 10)
&gt;       dib._generate_a_stellar_image(a, si)

../tests/pipeline/test_detector_image_builder.py:37: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &lt;telescope_baseline.tools.pipeline.detector_image_builder.DetectorImageBuilder object at 0x7ff123c81c10&gt;
a = array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]])
dps = &lt;telescope_baseline.tools.pipeline.position_on_detector.PositionOnDetector object at 0x7ff123c81a00&gt;

    def _generate_a_stellar_image(self, a, dps):
&gt;       n = dps.n_photons + np.random.randn() * math.sqrt(dps.n_photons)
E       AttributeError: 'PositionOnDetector' object has no attribute 'n_photons'

telescope_baseline/tools/pipeline/detector_image_builder.py:53: AttributeError</failure></testcase><testcase classname="tests.pipeline.test_detector_image_catalogue" name="test_load" time="0.012" /><testcase classname="tests.pipeline.test_detector_image_catalogue" name="test_save" time="0.088" /><testcase classname="tests.pipeline.test_map_on_detector" name="test_save1" time="0.002" /><testcase classname="tests.pipeline.test_map_on_detector" name="test_save2" time="0.002" /><testcase classname="tests.pipeline.test_map_on_detector" name="test_load1" time="0.001" /><testcase classname="tests.pipeline.test_map_on_detector" name="test_load2" time="0.002" /><testcase classname="tests.pipeline.test_map_on_detector" name="test_get_sky_positions1" time="0.005" /><testcase classname="tests.pipeline.test_map_on_detector" name="test_get_sky_positions2" time="0.004" /><testcase classname="tests.pipeline.test_map_on_detector" name="test_positions_on_detector" time="0.001" /><testcase classname="tests.pipeline.test_map_on_detector_builder" name="test_from_detector_image_catalogue" time="0.091" /><testcase classname="tests.pipeline.test_map_on_detector_builder" name="test_from_on_tye_sky_position" time="0.003" /><testcase classname="tests.pipeline.test_map_on_detector_builder" name="test_from_on_tye_sky_position_value_error" time="0.003" /><testcase classname="tests.pipeline.test_map_on_detector_builder" name="test_position" time="0.140" /><testcase classname="tests.pipeline.test_map_on_the_sky" name="test_save1" time="0.010" /><testcase classname="tests.pipeline.test_map_on_the_sky" name="test_save2" time="0.010" /><testcase classname="tests.pipeline.test_map_on_the_sky" name="test_save3" time="0.009" /><testcase classname="tests.pipeline.test_map_on_the_sky" name="test_save4" time="0.009" /><testcase classname="tests.pipeline.test_map_on_the_sky" name="test_load1" time="0.002" /><testcase classname="tests.pipeline.test_map_on_the_sky" name="test_load2" time="0.003" /><testcase classname="tests.pipeline.test_map_on_the_sky" name="test_load3" time="0.003" /><testcase classname="tests.pipeline.test_map_on_the_sky" name="test_position_on_the_sky" time="0.002" /><testcase classname="tests.pipeline.test_map_on_the_sky" name="test_orbit_id" time="0.003" /><testcase classname="tests.pipeline.test_map_on_the_sky_builder" name="test_position_at_certain_time" time="0.138" /><testcase classname="tests.pipeline.test_map_on_the_sky_builder" name="test_from_astrometric_catalogue_2_list" time="0.147" /><testcase classname="tests.pipeline.test_map_on_the_sky_builder" name="test_from_stellar_image" time="0.004" /><testcase classname="tests.pipeline.test_pipeline" name="test_simulation" time="1.835"><failure message="AttributeError: 'PositionOnDetector' object has no attribute 'n_photons'">def test_simulation():
        a = AstrometricCatalogue([
            CatalogueEntry(1,
                           SkyCoord(l=0., b=0., unit=('rad', 'rad'), frame='galactic', obstime='2000-01-01 00:00:00.0',
                                    distance=1.0 * u.pc, pm_l_cosb=10 * u.mas / u.yr, pm_b=10 * u.mas / u.yr),
                           12.5),
        ])
        t = [Time('2000-01-01 00:00:00.0'), Time('2000-02-01 00:00:00.0'), Time('2000-03-01 00:00:00.0'),
             Time('2000-04-01 00:00:00.0'), Time('2000-05-01 00:00:00.0'), Time('2000-06-01 00:00:00.0'),
             Time('2000-07-01 00:00:00.0'), Time('2000-08-01 00:00:00.0'), Time('2000-09-01 00:00:00.0'),
             Time('2000-10-01 00:00:00.0'), Time('2000-11-01 00:00:00.0'), Time('2000-12-01 00:00:00.0'),
             Time('2001-01-01 00:00:00.0')]
        w = WCS(naxis=2)
        w.wcs.crpix = [256, 256]  # Reference point in pixel
        w.wcs.cd = [[1.31e-4, 0], [0, 1.31e-4]]  # cd matrix
        w.wcs.crval = [0, 0]  #
        w.wcs.ctype = ["GLON-TAN", "GLAT-TAN"]
        wlist = []
        for i in range(len(t)):
            wlist.append(WCSwId(i, 1, copy.deepcopy(w)))
        c = Simulation(t=t, w_list=wlist)
&gt;       b = c.do(a, 1024, 1.0)

../tests/pipeline/test_pipeline.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
telescope_baseline/tools/pipeline/simulation.py:45: in do
    di = self._generate_one_hdu(dib, o, sib, wl)
telescope_baseline/tools/pipeline/simulation.py:61: in _generate_one_hdu
    di.append(dib.from_map_on_detector(si[j]))
telescope_baseline/tools/pipeline/detector_image_builder.py:41: in from_map_on_detector
    self._generate_a_stellar_image(data_array, dps)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &lt;telescope_baseline.tools.pipeline.detector_image_builder.DetectorImageBuilder object at 0x7ff123ca2460&gt;
a = array([[5.01149605, 4.61372127, 6.69030395, ..., 8.17249227, 9.73852039,
        5.68081159],
       [8.5209191 , 0.37...85,
        7.54150031],
       [3.78855295, 5.01737431, 6.40637111, ..., 8.28867462, 7.40510973,
        0.04971186]])
dps = &lt;telescope_baseline.tools.pipeline.position_on_detector.PositionOnDetector object at 0x7ff122318af0&gt;

    def _generate_a_stellar_image(self, a, dps):
&gt;       n = dps.n_photons + np.random.randn() * math.sqrt(dps.n_photons)
E       AttributeError: 'PositionOnDetector' object has no attribute 'n_photons'

telescope_baseline/tools/pipeline/detector_image_builder.py:53: AttributeError</failure></testcase><testcase classname="tests.pipeline.test_pipeline" name="test_analysis" time="7.748" /><testcase classname="tests.pipeline.test_position2D" name="test_pos" time="0.001" /><testcase classname="tests.pipeline.test_position_on_detector" name="test_pos" time="0.001" /><testcase classname="tests.pipeline.test_position_on_detector" name="test_pos2" time="0.001" /><testcase classname="tests.pipeline.test_position_on_the_sky" name="test_pos1" time="0.002" /><testcase classname="tests.pipeline.test_position_on_the_sky" name="test_pos2" time="0.003" /></testsuite></testsuites>